<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:body>
    <ui:composition template="/WEB-INF/facelets/template.xhtml">
        <ui:param name="page" value="" />
        <ui:define name="title" ><p style="font-weight: bold; color:blue; font-size:15px">#{villaLinkService.linkParamdHead}</p>
            <p>Once done, compare remove if unwanted lines , after that create PR and send me link for approval</p>
            <div class="card">
                <h:form id="form">
                    <p:dialog widgetVar="spinnerDialog"  style="background-color: #3A3B3C;"  modal="true" closable="false" draggable="false" resizable="false" showEffect="fade" hideEffect="fade">
                        <p:graphicImage name="images/spin/spin1.gif" width="70px"  height="70px" />
                    </p:dialog>
                    <br></br>

                    <c:if test="#{villaLinkService.totalRecords > 0}">
                        <p:panel>
                            <p:panelGrid columns="1" styleClass="noBorder" style="margin:auto; top : 0;left : 0; padding : 0; bottom : 0; text-align: left; ">
                                <h:outputText  style="font-weight: normal; font-style:italic; font-size:15px; color: blue; text-align: left;" value="Selected properties : #{villaLinkService.totalRecords}" />
                            </p:panelGrid>
                        </p:panel>
                    </c:if>



                    <div style="display: flex; justify-content: center; align-items: center; ">





                        <h:panelGrid   columns="2" style="width: auto; text-align: center">

                            <p:dataScroller value="#{villaLinkService.villaModel}" var="product" chunkSize="10">
                                <p:panel  style="width: 100%; height:340px; box-shadow: 10px 10px 5px grey; " >

                                    <h:panelGrid   columns="4" styleClass="Border" style="top : 0;right : 0; padding : 0; bottom : 0; font-size:15px; width:100%; ">
                                        <h:outputText style="font-weight: bold;color: green;font-size:13px;" value="#{product.i_am} : #{product.owner_name}" />

                                        <h:outputText class="pi pi-globe" style="font-weight: bold;color: brown;font-size:13px; float:right" value=" Residential Villa/Flats for Sale in #{product.prim_location} , #{product.seco_location}" />
                                    </h:panelGrid>



                                    <h:panelGrid   columns="5" styleClass="Border" style="top : 0;right : 0; padding : 0; bottom : 0; font-size:15px; width:100%; ">
                                        <p:graphicImage width="200" height="200" stream="false" cache="false" value="#{product.streamedContent}" />

                                        <h:panelGrid   columns="2" columnClasses="width-25-pct-txt-left,width-25-pct-txt-center,width-25-pct-txt-right" style="text-align: left;width: auto;">

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" #{product.i_am} : " />
                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value="#{product.owner_name}" />

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Contact : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.contact_owner}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Email : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.email}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value="Availability Date : " />
                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value="#{product.avail_date}"/>



                                        </h:panelGrid>


                                        <h:panelGrid   columns="2" columnClasses="width-25-pct-txt-left,width-25-pct-txt-center,width-25-pct-txt-right" style="text-align: left;width: auto;">

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Facing : " />
                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value="#{product.facing}" />

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Road width : " />
                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value="#{product.road_width}" />

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Floors : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.floors}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Bed Rooms : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.bed_rooms}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Bath Rooms : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.bath_rooms}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Furnished : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.furnished}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Floor Number : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.floorNum}"/>
                                        </h:panelGrid>


                                        <h:panelGrid   columns="2" columnClasses="width-25-pct-txt-left,width-25-pct-txt-center,width-25-pct-txt-right" style="text-align: left;width: auto;">

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Flat Area : " />
                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value="#{product.plot_area}" />

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Super Buildup Area : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.s_build_are}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Property Available : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.pro_avail}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Per sqft Cost : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.persqft}"/>

                                            <h:outputText style="font-weight: normal;color: block;font-size: 11px;" value=" Total feets : "/>
                                            <h:outputText  style="font-weight: normal;color: block;font-size: 11px;" value="#{product.total_feets}"/>
                                        </h:panelGrid>

                                        <h:panelGrid   columns="1" width="60%" columnClasses="width-25-pct-txt-left,width-25-pct-txt-center,width-25-pct-txt-right">
                                            <h:outputText style="font-weight: bold;color: red;font-size: 15px"  value="Rs #{product.cost}" />

                                            <p:commandButton type="submit" value="Callback" icon="ui-icon-calculator" style="background:#FFA500;font-weight: bold;color: black;font-size: 15px"
                                                             process="@this"
                                                             action="#{villaLinkService.storeSelectedPropertyInSession}"
                                                             onclick="PF('leadDialog').show()">
                                                <f:setPropertyActionListener value="#{product}" target="#{villaLinkService.selectedProperty}" />
                                            </p:commandButton>


                                            <p:commandButton type="submit" value="Enquiry" icon="ui-icon-calculator" style="background:#1E90FF;font-weight: bold;color: black;font-size: 15px; width:100px"
                                                             process="@this"
                                                             action="#{villaLinkService.storeSelectedPropertyInSession}"
                                                             onclick="PF('leadDialog').show()">
                                                <f:setPropertyActionListener value="#{product}" target="#{villaLinkService.selectedProperty}" />
                                            </p:commandButton>

                                        </h:panelGrid>


                                    </h:panelGrid>



                                    <h:panelGrid   columns="1" width="100%" columnClasses="width-25-pct-txt-left,width-25-pct-txt-center,width-25-pct-txt-right">
                                        <h:outputText style="font-weight: normal; font-size: 15px" value="Location : #{product.address}" />
                                    </h:panelGrid>


                                    <br></br>
                                    <h:panelGrid  columns="4" width="100%"  columnClasses="width-25-pct-txt-left,width-25-pct-txt-center,width-25-pct-txt-right" style="font-weight: normal; font-weight: bold; font-size: 13px" >
                                        <h:outputText value="Posted : #{product.create_date}" >
                                            <f:convertDateTime type="date" dateStyle="full"/>
                                        </h:outputText>

                                        <h:link  value = "Find Builders" class="pi pi-user" outcome = "builders.xhtml" style="font-weight: bold; font-size: 13px;color:block;float: right; margin-right: 50px;" />
                                        <h:link  value = "Find Agents"  class="pi pi-user" outcome = "agents.xhtml" style="font-weight: bold; font-size: 13px;color:block;float: right; margin-right: 50px;" />
                                        <h:link  value = "Enquiry" class="pi pi-user" outcome = "enquiry.xhtml" style="font-weight: bold; font-size: 13px;color:block;float: right; margin-right: 50px;" />

                                    </h:panelGrid>



                                </p:panel>
                                <br></br>
                            </p:dataScroller>

                            <h:panelGrid  columns="1" style="vertical-align: top;">
                                <p:dataScroller value="#{villaLinkService.promoImageModel}" var="product1" chunkSize="10">
                                    <p:graphicImage width="300" height="500" stream="false" cache="false" value="#{product1.streamedContent}" />
                                </p:dataScroller>

                            </h:panelGrid>


                        </h:panelGrid>



                    </div>


                    <p:panel>
                        <p:panelGrid columns="3" styleClass="noBorder" style="margin:auto; top : 0;left : 0; padding : 0; bottom : 0; text-align: left; ">
                            <h:commandButton value="Previous" action="#{villaLinkService.previousPage}" disabled="#{villaLinkService.currentPage == 1}" >
                                <f:setPropertyActionListener target="#{villaLinkService.currentPage}" value="#{villaLinkService.currentPage - 1}" />
                                <f:setPropertyActionListener target="#{villaLinkService.promoCurrentPage}" value="#{villaLinkService.promoCurrentPage}" />
                            </h:commandButton>
                            <h:commandButton value="Next" action="#{villaLinkService.nextPage}" disabled="#{villaLinkService.currentPage * villaLinkService.pageSize >= plot1bhkService.totalRecords}" >
                                <f:setPropertyActionListener target="#{villaLinkService.currentPage}" value="#{villaLinkService.currentPage}" />
                                <f:setPropertyActionListener target="#{villaLinkService.promoCurrentPage}" value="#{villaLinkService.promoCurrentPage}" />
                            </h:commandButton>
                            <h:outputText value="Page #{villaLinkService.currentPage} of #{villaLinkService.totalPages}" />
                        </p:panelGrid>
                    </p:panel>


                </h:form>



                <h:form id="form1">
                    <p:messages id="msgs"/>
                    <p:dialog header="Call back details" widgetVar="leadDialog" minHeight="600" width="700" showEffect="fade">

                        <p:panel id="panelDialog" style="background-image: url('back1.jpg'); ">
                            <p:panelGrid columns="3" styleClass="noBorder" style="top : 0;left : 0; padding : 0; bottom : 0 ;">
                                <p:panelGrid columns="3" styleClass="noBorder" style="top : 0;left : 0; padding : 0; bottom : 0">


                                    <p:outputLabel required="true" style="font-weight: bold" for="name" indicateRequired="true" value="Name : " />
                                    <p:inputText id="name" value="#{villaLinkService.custName}" required="true" requiredMessage="Required  Name">
                                    </p:inputText>
                                    <p:message for="name" display="icon"/>


                                    <p:outputLabel style="font-weight: bold" for="ContactNumber" indicateRequired="true" value="Contact Number : " />
                                    <p:inputMask id="ContactNumber"  mask="9999999999" required="true"  maxlength="10" value="#{villaLinkService.contactNumber}" >
                                    </p:inputMask>
                                    <p:message for="ContactNumber" display="icon"/>

                                    <h:outputText style="font-weight: bold; font-size: 14px;color:black; text-align:left;" value="Email : " />
                                    <h:inputText id="email"  size="30" value="#{villaLinkService.email}"  validatorMessage="Invalid email format">
                                        <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                    </h:inputText>
                                    <p:message for="email" display="icon"/>


                                </p:panelGrid>
                            </p:panelGrid>
                        </p:panel>


                        <br></br>
                        <h:commandButton value="Submit"   type="submit"  process="@this" update="@form" actionListener="#{villaLinkService.submit}" onclick="PF('spinnerDialog').show()" >
                            <p:resetInput target="form"/>
                        </h:commandButton>
                        <p:commandButton value="Reset" update="panelDialog" process="@this"
                                         action="#{villaLinkService.reset}"
                                         styleClass="mr-2 ui-button-outlined"/>

                    </p:dialog>


                    <script type="text/javascript" src="resources/js/chatool.js"></script>
                </h:form>


            </div>
        </ui:define>
    </ui:composition>
</h:body>
</html>